<div class="project-container">
    <div class="project-cover">
        <img src="images/proyectos/circunvalacion/portada.webp" alt="Urb. Villa Circunvalacion" class="cover-image">
    </div>

    <!-- Top Grey Info Bar -->
    <div class="info-section-grey">
        <div class="info-container">
            <div class="info-left">
                <h2 class="title-small">SAPALLANGA - LA PUNTA</h2>
                <h1 class="location-large">URB. VILLA CIRCUNVALACION</h1>
                <div class="details-row">
                    <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                        <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                    <p class="details">Calle Circunvalación, La Punta, Sapallaga, Huancayo</p>
                </div>
                <div class="details-row">
                    <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    <p class="details">Lunes a Sábados de 9:00 AM - 5:00 PM</p>
                </div>
            </div>
            <div class="info-right"></div>
        </div>
    </div>

    <!-- Sub-Navigation Bar -->
    <nav class="sub-nav">
        <div class="sub-nav-container">
            <a (click)="scrollTo('info')" [class.active]="activeSection() === 'info'">Información</a>
            <a (click)="scrollTo('plano')" [class.active]="activeSection() === 'plano'">Plano</a>
            <a (click)="scrollTo('ubicacion')" [class.active]="activeSection() === 'ubicacion'">Ubicación</a>
            <a (click)="scrollTo('beneficios')" [class.active]="activeSection() === 'beneficios'">Beneficios</a>
            <a (click)="scrollTo('galeria')" [class.active]="activeSection() === 'galeria'">Galería</a>
            <a (click)="scrollTo('financiamiento')"
                [class.active]="activeSection() === 'financiamiento'">Financiamiento</a>
        </div>
        <div class="sub-nav-line"></div>
    </nav>

    <!-- Main Content with Text and Form -->
    <div class="main-content-section" id="info">
        <div class="content-container">
            <!-- Left: Text Column (Contains all project details now) -->
            <div class="content-text">


                <div class="paragraphs">
                    <p>
                        En Residencial Villa Circunvalación encontrarás lotes en el centro poblado "La Punta", distrito
                        de
                        Sapallanga , provincia de Huancayo. Los lotes cuentan con todos los
                        servicios básicos habilitados, como luz, agua y desagüe.
                    </p>
                    <p>
                        Si estás buscando lotes con una buena ubicación y alto potencial de valorización, Residencial
                        Villa
                        Circunvalación es tu mejor oportunidad. Contamos con una atractiva oferta de venta de lotes,
                        pensada
                        tanto para quienes desean construir su hogar como para quienes buscan una inversión segura.
                    </p>
                </div>

                <!-- Integrated Project Sections -->
                <div class="integrated-sections">
                    <!-- Plano Section -->
                    <section class="detail-section" id="plano">
                        <h2 class="section-subtitle">Plano</h2>
                        <div class="plano-container">
                            <div class="plano-wrapper">
                                <img src="images/proyectos/circunvalacion/plano_boton.webp" alt="Ver plano"
                                    class="plano-img">
                                <div class="plano-overlay">
                                    <button class="plano-explorar-btn" (click)="togglePlano(true)">Explorar
                                        plano</button>
                                </div>
                            </div>
                        </div>
                    </section>

                    @if (showPlano()) {
                    <app-circunvalacion-plano (close)="togglePlano(false)"></app-circunvalacion-plano>
                    }

                    <!-- Ubicación Section -->
                    <section class="detail-section" id="ubicacion">
                        <h2 class="section-subtitle">Ubicación</h2>
                        <div class="ubicacion-layout">
                            <div class="ubicacion-text">
                                <h3 class="loc-title">La punta</h3>
                                <h4 class="loc-subtitle">Sapallanga - Huancayo</h4>
                                <ul class="loc-list">
                                    <li>A 5 min de la Calle Real</li>
                                    <li>A 3 min de la plaza </li>
                                    <li>Acceso a la via pública</li>
                                </ul>
                            </div>
                            <div class="ubicacion-image">
                                <img src="images/proyectos/circunvalacion/croquis.webp" alt="Mapa de ubicación"
                                    class="map-image clickable-image" (click)="toggleModal(true)">
                            </div>
                        </div>

                        @if (showCroquis()) {
                        <div class="modal-overlay" (click)="toggleModal(false)">
                            <div class="modal-content-croquis" (click)="$event.stopPropagation()">
                                <!-- Left Section: Location and Button -->
                                <!-- Left Section: Location and Button -->
                                <div class="modal-side-content">
                                    <div class="modal-text-block">
                                        <p class="modal-location-label">Ubicación:</p>
                                        <p class="modal-location-subtitle">Calle Circunvalación, La Punta,
                                            Sapallanga, Huancayo</p>
                                    </div>
                                    <button class="btn-como-llegar" (click)="openGoogleMaps()">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                            <circle cx="12" cy="10" r="3"></circle>
                                        </svg>
                                        Cómo llegar
                                    </button>
                                </div>

                                <img src="images/proyectos/circunvalacion/croquis.webp" alt="Mapa ampliado"
                                    class="croquis-large">

                                <!-- Right Button: Close -->
                                <button class="close-btn-croquis" (click)="toggleModal(false)">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <line x1="18" y1="6" x2="6" y2="18"></line>
                                        <line x1="6" y1="6" x2="18" y2="18"></line>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        }
                    </section>

                    <!-- Beneficios Section -->
                    <section class="detail-section" id="beneficios">
                        <h2 class="section-subtitle">Beneficios</h2>
                        <div class="beneficios-grid-compact">
                            <div class="beneficio-item">
                                <img src="images/proyectos/circunvalacion/beneficios1.webp" alt="Título de Propiedad">
                                <p>Título de Propiedad</p>
                            </div>
                            <div class="beneficio-item">
                                <img src="images/proyectos/circunvalacion/beneficios2.webp" alt="Alta Rentabilidad">
                                <p>Alta Rentabilidad</p>
                            </div>
                            <div class="beneficio-item">
                                <img src="images/proyectos/circunvalacion/beneficios3.webp" alt="Servicios Integrados">
                                <p>Servicios Integrados</p>
                            </div>
                            <div class="beneficio-item">
                                <img src="images/proyectos/circunvalacion/beneficios4.webp"
                                    alt="Ubicación Privilegiada">
                                <p>Ubicación Privilegiada</p>
                            </div>
                            <div class="beneficio-item">
                                <img src="images/proyectos/circunvalacion/beneficios5.webp"
                                    alt="Más de 20 lotes entregados">
                                <p>Más de 20 lotes entregados</p>
                            </div>
                            <div class="beneficio-item">
                                <img src="images/proyectos/circunvalacion/beneficios6.webp"
                                    alt="Resolución de habilitación urbana">
                                <p>Resolución de habilitación urbana</p>
                            </div>
                        </div>
                    </section>

                    <!-- Galería Section -->
                    <section class="detail-section" id="galeria">
                        <h2 class="section-subtitle">Galería</h2>
                        <div class="gallery-carousel">
                            <button class="carousel-btn prev" (click)="prevImage()" type="button">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M15 18l-6-6 6-6" />
                                </svg>
                            </button>
                            <div class="gallery-image-wrapper">
                                <img [src]="galleryImages[currentGalleryIndex]" alt="Galería Circunvalación"
                                    class="gallery-image">
                            </div>
                            <button class="carousel-btn next" (click)="nextImage()" type="button">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M9 18l6-6-6-6" />
                                </svg>
                            </button>
                        </div>
                    </section>

                    <!-- Financia con nosotros Section -->
                    <section class="detail-section" id="financiamiento">
                        <h2 class="section-subtitle">Financia con nosotros</h2>
                        <div class="financia-container">
                            <img src="images/proyectos/circunvalacion/financiamiento.webp" alt="Financia con nosotros"
                                class="financia-img">
                        </div>
                    </section>
                </div>
            </div>

            <!-- Right: Standardized Form (follows user scrolling) -->
            <div class="content-form">
                <div class="bg-[#00528C] rounded-2xl p-6 md:p-8 shadow-2xl w-full max-w-[28rem] ml-auto">
                    <h2 class="text-white text-2xl md:text-3xl font-bold mb-8 text-center">Quiero recibir información
                    </h2>

                    <form class="space-y-5">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <input type="text" placeholder="Nombre*"
                                class="w-full px-5 py-3 rounded-full bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#F9A62E]">
                            <input type="text" placeholder="Apellidos*"
                                class="w-full px-5 py-3 rounded-full bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#F9A62E]">
                        </div>

                        <input type="email" placeholder="Correo Electrónico*"
                            class="w-full px-5 py-3 rounded-full bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#F9A62E]">

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <div class="relative group">
                                <select #docSelect
                                    class="w-full px-5 pr-12 py-3 rounded-full bg-white text-gray-400 focus:outline-none focus:ring-2 focus:ring-[#F9A62E] appearance-none cursor-pointer"
                                    onchange="this.classList.remove('text-gray-400'); this.classList.add('text-gray-700')">
                                    <option disabled selected hidden>Documento*</option>
                                    <option class="text-black bg-white">DNI</option>
                                    <option class="text-black bg-white">Pasaporte</option>
                                    <option class="text-black bg-white">Carnet de Extranjería</option>
                                </select>
                                <button type="button" (click)="docSelect.showPicker()"
                                    class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-gray-400 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-500 transition-colors pointer-events-auto">
                                    <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </button>
                            </div>
                            <input type="text" placeholder="No. documento*"
                                class="w-full px-5 py-3 rounded-full bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#F9A62E]">
                        </div>

                        <div class="grid grid-cols-12 gap-2">
                            <div class="col-span-4 relative group">
                                <select #prefSelect (change)="onPrefijoChange($event)"
                                    [class.opacity-0]="mostrarInputPrefijo()"
                                    class="w-full px-4 pr-10 py-3 rounded-full bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#F9A62E] appearance-none text-sm md:text-base cursor-pointer">
                                    <option class="text-black">+51</option>
                                    <option value="otro" class="text-black">Otro*</option>
                                </select>

                                @if (mostrarInputPrefijo()) {
                                <div class="absolute inset-0 flex items-center pointer-events-none">
                                    <div class="relative w-full h-full pointer-events-auto">
                                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-700">+</span>
                                        <input type="tel" placeholder="Otro*"
                                            class="w-full h-full pl-8 pr-10 py-3 rounded-full bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#F9A62E] text-sm md:text-base placeholder:text-gray-400">
                                    </div>
                                </div>
                                }

                                <button type="button" (click)="prefSelect.showPicker()"
                                    class="absolute right-2 top-1/2 -translate-y-1/2 w-5 h-5 bg-gray-400 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-500 transition-colors z-10">
                                    <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </button>
                            </div>
                            <input type="tel" placeholder="Teléfono*"
                                class="col-span-8 px-5 py-3 rounded-full bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#F9A62E]">
                        </div>

                        <div class="flex items-center space-x-3">
                            <input type="checkbox" id="datosPers"
                                class="w-4 h-4 rounded focus:ring-2 focus:ring-[#F9A62E] bg-white cursor-pointer">
                            <label for="datosPers" class="text-white text-sm cursor-pointer select-none">
                                He leído y acepto el <a routerLink="/terminos-y-condiciones" target="_blank"
                                    class="underline">Tratamiento de mis datos
                                    personales</a>
                            </label>
                        </div>

                        <button type="submit"
                            class="w-full bg-[#F9A62E] hover:bg-[#e89620] text-white font-bold text-lg py-3 rounded-full transition-all duration-200 shadow-lg mt-2 cursor-pointer">
                            Solicitar información
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>